<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Documents | Alpine Property Group</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="alpine-shared.js"></script>
  <link rel="stylesheet" href="alpine-premium.css">
  <style>
    .categories-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 32px;
    }

    .category-card {
      background: linear-gradient(to bottom, #ffffff 0%, #fafbfc 100%);
      border-radius: var(--radius-xl);
      padding: 24px;
      box-shadow: var(--shadow-lg);
      border: 1px solid var(--gray-200);
      transition: all var(--transition-base);
      cursor: pointer;
      text-align: center;
    }

    .category-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-xl);
      border-color: var(--primary-300);
    }

    .category-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }

    .category-name {
      font-size: 18px;
      font-weight: 700;
      color: var(--primary-900);
      margin-bottom: 8px;
    }

    .category-count {
      font-size: 14px;
      color: var(--gray-600);
    }

    .documents-list {
      background: linear-gradient(to bottom, #ffffff 0%, #fafbfc 100%);
      border-radius: var(--radius-xl);
      padding: 28px;
      box-shadow: var(--shadow-lg);
      border: 1px solid var(--gray-200);
    }

    .list-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 2px solid var(--gray-200);
    }

    .list-title {
      font-size: 24px;
      font-weight: 700;
      color: var(--primary-900);
    }

    .document-row {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr auto;
      gap: 16px;
      padding: 16px;
      background: var(--gray-50);
      border-radius: var(--radius-md);
      margin-bottom: 12px;
      align-items: center;
      transition: all var(--transition-base);
    }

    .document-row:hover {
      background: var(--gray-100);
      box-shadow: var(--shadow-sm);
    }

    .doc-name {
      font-weight: 600;
      color: var(--primary-800);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .doc-icon {
      font-size: 20px;
    }

    .doc-date {
      font-size: 14px;
      color: var(--gray-600);
    }

    .doc-type {
      padding: 4px 12px;
      border-radius: var(--radius-sm);
      font-size: 12px;
      font-weight: 600;
      background: var(--primary-100);
      color: var(--primary-700);
      text-align: center;
    }

    .template-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 16px;
      margin-top: 24px;
    }

    .template-card {
      background: var(--gray-50);
      border-radius: var(--radius-lg);
      padding: 20px;
      border: 2px dashed var(--gray-300);
      transition: all var(--transition-base);
      cursor: pointer;
      text-align: center;
    }

    .template-card:hover {
      border-color: var(--primary-500);
      background: white;
      box-shadow: var(--shadow-md);
    }

    .template-name {
      font-weight: 600;
      color: var(--primary-800);
      margin-top: 8px;
    }

    @media (max-width: 768px) {
      .document-row {
        grid-template-columns: 1fr;
        gap: 8px;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const CATEGORIES = [
      { id: 'contracts', name: 'Contracts', icon: 'üìã' },
      { id: 'agreements', name: 'Agreements', icon: 'ü§ù' },
      { id: 'permits', name: 'Permits & Licenses', icon: 'üìú' },
      { id: 'financial', name: 'Financial', icon: 'üí∞' },
      { id: 'legal', name: 'Legal', icon: '‚öñÔ∏è' },
      { id: 'insurance', name: 'Insurance', icon: 'üõ°Ô∏è' }
    ];

    const TEMPLATES = [
      { name: 'Purchase Agreement', category: 'contracts', icon: 'üìÑ' },
      { name: 'Operating Agreement', category: 'agreements', icon: 'üìù' },
      { name: 'Lease Agreement', category: 'contracts', icon: 'üè†' },
      { name: 'Development Agreement', category: 'agreements', icon: 'üèóÔ∏è' },
      { name: 'Waterfall Schedule', category: 'financial', icon: 'üíé' },
      { name: 'Subscription Agreement', category: 'legal', icon: '‚úçÔ∏è' }
    ];

    function App() {
      const [documents, setDocuments] = useState([]);
      const [selectedCategory, setSelectedCategory] = useState(null);
      const [showTemplates, setShowTemplates] = useState(false);

      useEffect(() => {
        loadData();
      }, []);

      const loadData = () => {
        let docsData = AlpineData.getAll(AlpineData.KEYS.DOCUMENTS);
        
        // Initialize with sample data if empty
        if (docsData.length === 0) {
          docsData = [
            {
              id: '1',
              name: 'Riverside Apartments - Purchase Agreement',
              category: 'contracts',
              type: 'PDF',
              date: '2026-01-15',
              projectId: null
            },
            {
              id: '2',
              name: 'Alpine Property Group - Operating Agreement',
              category: 'agreements',
              type: 'PDF',
              date: '2025-06-01',
              projectId: null
            },
            {
              id: '3',
              name: 'General Liability Insurance',
              category: 'insurance',
              type: 'PDF',
              date: '2026-01-01',
              projectId: null
            },
            {
              id: '4',
              name: 'Building Permit - Riverside',
              category: 'permits',
              type: 'PDF',
              date: '2026-02-10',
              projectId: null
            }
          ];
          AlpineData.save(AlpineData.KEYS.DOCUMENTS, docsData);
        }
        
        setDocuments(docsData);
      };

      const getDocumentsByCategory = (categoryId) => {
        return documents.filter(d => d.category === categoryId);
      };

      const getCategoryCount = (categoryId) => {
        return getDocumentsByCategory(categoryId).length;
      };

      const handleCategoryClick = (category) => {
        setSelectedCategory(category);
        setShowTemplates(false);
      };

      const handleTemplateClick = (template) => {
        alert(`Template: ${template.name}\n\nThis would generate a new ${template.name} document.`);
      };

      return (
        <div className="container">
          <div className="header">
            <h1>üìÑ Documents</h1>
            <div className="nav-buttons">
              <a href="index.html" className="btn btn-secondary">üè† Home</a>
              {selectedCategory && (
                <button className="btn btn-secondary" onClick={() => setSelectedCategory(null)}>
                  ‚Üê Back to Categories
                </button>
              )}
              <button className="btn btn-primary" onClick={() => setShowTemplates(!showTemplates)}>
                üìù Templates
              </button>
            </div>
          </div>

          <div className="stats-grid">
            <div className="stat-card">
              <div className="stat-value">{documents.length}</div>
              <div className="stat-label">Total Documents</div>
            </div>
            <div className="stat-card">
              <div className="stat-value">{CATEGORIES.length}</div>
              <div className="stat-label">Categories</div>
            </div>
            <div className="stat-card">
              <div className="stat-value">{TEMPLATES.length}</div>
              <div className="stat-label">Templates Available</div>
            </div>
          </div>

          {showTemplates ? (
            <div className="documents-list">
              <div className="list-header">
                <div className="list-title">Document Templates</div>
              </div>
              <div className="template-grid">
                {TEMPLATES.map((template, idx) => (
                  <div
                    key={idx}
                    className="template-card"
                    onClick={() => handleTemplateClick(template)}
                  >
                    <div style={{fontSize: '32px'}}>{template.icon}</div>
                    <div className="template-name">{template.name}</div>
                  </div>
                ))}
              </div>
            </div>
          ) : !selectedCategory ? (
            <div className="categories-grid">
              {CATEGORIES.map(category => (
                <div
                  key={category.id}
                  className="category-card"
                  onClick={() => handleCategoryClick(category)}
                >
                  <div className="category-icon">{category.icon}</div>
                  <div className="category-name">{category.name}</div>
                  <div className="category-count">
                    {getCategoryCount(category.id)} documents
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <div className="documents-list">
              <div className="list-header">
                <div className="list-title">
                  {selectedCategory.icon} {selectedCategory.name}
                </div>
              </div>
              {getDocumentsByCategory(selectedCategory.id).length === 0 ? (
                <div className="empty-state">
                  <div className="empty-state-icon">üì≠</div>
                  <h3>No documents yet</h3>
                  <p>Upload or create documents in this category</p>
                </div>
              ) : (
                getDocumentsByCategory(selectedCategory.id).map(doc => (
                  <div key={doc.id} className="document-row">
                    <div className="doc-name">
                      <span className="doc-icon">üìÑ</span>
                      {doc.name}
                    </div>
                    <div className="doc-date">{AlpineData.formatDate(doc.date)}</div>
                    <div className="doc-type">{doc.type}</div>
                    <button className="btn btn-secondary" style={{padding: '6px 16px'}}>
                      View
                    </button>
                  </div>
                ))
              )}
            </div>
          )}
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
